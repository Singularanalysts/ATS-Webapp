<div class="container">
    <div class="header-container mat-elevation-z1">
      <span class="header-text">
        TCVR
      </span>
      <div class="tcvr-actions">
        <button  [disabled]="!privilegeServ.hasPrivilege('ADD_TCVR')" mat-icon-button class="add-user"
          (click)="addClient()" matTooltip="Add TCVR" matTooltipPosition="above">
          <mat-icon [ngClass]="{'item-icon': privilegeServ.hasPrivilege('ADD_TCVR')}">add_circle</mat-icon>
        </button>
  
        <div class="search-tcvr">
          <input matInput type="text" class="search" placeholder="search TCVR" (keyup)="applyFilter($event)">
        </div>
      </div>
    </div>
    <div id="table-container" class="table-wrapper">

        <mat-tab-group (selectedTabChange)="onTabChanged($event)" mat-stretch-tabs="false" mat-align-tabs="start" color="primary" backgroundColor="primary">
          <mat-tab *ngFor="let tab of tabs" [label]="tab">
            <ng-container *ngTemplateOutlet="tableTemplate; context: { status: tab }"></ng-container>
          </mat-tab>
        </mat-tab-group>

        <ng-template #tableTemplate>
        <section class="tcvr-table-style">
            <table mat-table [dataSource]="dataSource" matSort (matSortChange)="onSort($event)" oncopy="return false">
      
              <!--- Note that these columns can be defined in any order.
                    The actual rendered columns are set as a property on the row definition" -->
      
              <!-- Serial Number Column -->
              <ng-container matColumnDef="SerialNum">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Serial Number"> S.No </th>
                <td mat-cell *matCellDef="let element"> {{element?.serialNum}} </td>
              </ng-container>
      
              <!-- Company Column -->
              <ng-container matColumnDef="Client">
                <th mat-header-cell *matHeaderCellDef mat-sort-header mat-sort-header sortActionDescription="Sort by Client"> Client </th>
                <td mat-cell *matCellDef="let element">
                  {{element.client | titlecase}}
                </td>
              </ng-container>
      
              <!-- First Level Vendor Column -->
              <ng-container matColumnDef="FirstLevelVendor">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by FirstLevelVendor">Implementation Partner</th>
                <td mat-cell *matCellDef="let element" style="width: 20%"> {{element.first_level_Vendor | titlecase}} </td>
              </ng-container>
      
              <!-- Second Level Vendor Column -->
              <ng-container matColumnDef="SecondLevelVendor">
                <th mat-header-cell *matHeaderCellDef sortActionDescription="Sort by SecondLevelVendor"  mat-sort-header>1st Level Vendor</th>
                <td mat-cell *matCellDef="let element"> {{element.second_Level_Vendor | titlecase}} </td>
              </ng-container>
      
              <!-- Technology Column -->
              <ng-container matColumnDef="Technology">
                <th mat-header-cell *matHeaderCellDef  mat-sort-header sortActionDescription="Sort by Technology"> Technology </th>
                <td mat-cell *matCellDef="let element"> {{element.technology}} </td>
              </ng-container>

              <!-- Careers Page Column -->
              <ng-container matColumnDef="CareersPage">
                <th mat-header-cell *matHeaderCellDef  mat-sort-header sortActionDescription="Sort by CareersPage"> Careers Page </th>
                <td mat-cell *matCellDef="let element" class="truncate-text count">
                  <span (click)="openCareersPage(element.careers_page)">{{ element.careers_page }}</span>
                </td>
              </ng-container>
      
              <!-- Added By Column -->
              <ng-container matColumnDef="AddedBy">
                <th mat-header-cell *matHeaderCellDef mat-sort-header  sortActionDescription="Sort by pseudoname"> Added By </th>
                <td mat-cell *matCellDef="let element">
                    {{element.pseudoname  | titlecase}}
                </td>
              </ng-container>
      
              <!-- Added On Column -->
              <ng-container matColumnDef="AddedOn">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by createddate"> Added On </th>
                <td mat-cell *matCellDef="let element"> {{element.createddate | date:'MM-dd-yyyy'}} </td>
              </ng-container>
      
              <!-- Last Updated Column -->
              <ng-container matColumnDef="LastUpdated">
                <th mat-header-cell *matHeaderCellDef mat-sort-header  sortActionDescription="Sort by updateddate"> Last Updated </th>
                <td mat-cell *matCellDef="let element"> {{element.updateddate  | date:'MM-dd-yyyy'}} </td>
              </ng-container>
      
              <!-- Action Column -->
              <ng-container matColumnDef="Action">
                <th mat-header-cell *matHeaderCellDef> Action </th>
                <td mat-cell *matCellDef="let tcvr" style="white-space: nowrap;">
                  <span class="action-buttons">
                    <button [disabled]="!privilegeServ.hasPrivilege('EDIT_TCVR')" mat-icon-button
                      (click)="editClient(tcvr)" class="action-button-ed">
                      <mat-icon [ngClass]="{'edit-icon': privilegeServ.hasPrivilege('EDIT_TCVR')}">edit</mat-icon>
                    </button>
                    <button [disabled]="!privilegeServ.hasPrivilege('DELETE_TCVR')" mat-icon-button (click)="deleteClient(tcvr)" class="action-button-ed">
                      <mat-icon [ngClass]="{'delete-icon': privilegeServ.hasPrivilege('DELETE_TCVR')}">delete</mat-icon>
                    </button>
                  </span>
                </td>
              </ng-container>
      
              <!-- table columns ends  -->
      
              <!-- table ROW -->
              <tr mat-header-row *matHeaderRowDef="dataTableColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: dataTableColumns;"></tr>
            </table>
            <p class="no-data-found" *ngIf="!dataSource.filteredData.length">{{'No matching data found'}}</p>
          </section>
          <hr>
        </ng-template>
  
    </div>
    <!-- paginator -->
    <div class="paginator" *ngIf="dataSource.filteredData.length">
      <mat-paginator (page)="handlePageEvent($event)" [pageSize]="pageSize" [length]="totalItems" [disabled]="false"
        [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
        [hidePageSize]="true" [pageIndex]="currentPageIndex" aria-label="Select page">
      </mat-paginator>
    </div>
  </div>
  