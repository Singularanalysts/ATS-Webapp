<div class="submission-container">
    <ul class="breadcrumb">
        <li><a (click)="navigateToDashboard()">Home</a></li>
        <li class="last">TaskManagement</li>
        <li class="last">List Tasks</li>
    </ul>
    <div class="header-container mat-elevation-z1">
        <span class="header-text">
            List Tasks
        </span>

        <div class="submission-actions">
            <button [disabled]="!privilegeServ.hasPrivilege('ADD_INTERVIEWS')" matTooltip="Add"
                matTooltipPosition="left" mat-icon-button class="add-submission" (click)="addInterview()">
                <mat-icon [ngClass]="{'item-icon': privilegeServ.hasPrivilege('ADD_INTERVIEWS')}">add_circle</mat-icon>
            </button>

            <!-- <div class="search-submission">
                <input matInput type="text" class="search" placeholder="search interviews"
                    (keyup)="applyFilter($event)">
            </div> -->
        </div>
    </div>
    <div id="table-container" class="table-wrapper">
        <section class="mat-elevation-z8 interview-table-style">
            <table mat-table [dataSource]="dataSource" matSort (matSortChange)="onSort($event)" oncopy="return false">
                <ng-container matColumnDef="SerialNum">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by SerialNum"> #
                    </th>
                    <td mat-cell *matCellDef="let element"> {{ element.serialNum }} </td>
                </ng-container>
                <ng-container matColumnDef="ticketid">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Company">
                        Ticket ID </th>
                    <td mat-cell *matCellDef="let element"> {{ element.ticketid }} </td>
                </ng-container>
                <ng-container matColumnDef="taskname">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Company"> Task
                        Name </th>
                    <td mat-cell *matCellDef="let element"> {{ element.taskname }} </td>
                </ng-container>
                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Company">
                        Description </th>
                    <td mat-cell *matCellDef="let element"> <span matTooltip="{{ element.description }}">{{
                            element.description }}</span> </td>
                </ng-container>
                <ng-container matColumnDef="targetdate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Company">
                        Target Date </th>
                    <td mat-cell *matCellDef="let element"> {{ element.targetdate }} </td>
                </ng-container>
                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by Company">
                        Status</th>
                    <td mat-cell *matCellDef="let element"> {{ element.status }} </td>
                </ng-container>
                <ng-container matColumnDef="Action">
                    <th mat-header-cell *matHeaderCellDef>Actions</th>
                    <td mat-cell *matCellDef="let element">
                        <ng-container *ngFor="let data1 of element.assignedto">
                            <span *ngIf="data1.userid == userid">
                                <button [disabled]="!privilegeServ.hasPrivilege('STATUS_EMPLOYEE')" mat-raised-button
                                    style="width: 60px; height: 25px;" (click)="updateTask(element)"
                                    [ngStyle]="{ 'color': 'white', 'background-color': 'orange', 'font-weight': 'bold' }">
                                    Update
                                </button>
                                
                            </span>
                        </ng-container>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="dataTableColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: dataTableColumns;" [ngStyle]="getRowStyles(row)"></tr>
            </table>
            <p class="no-data-found" *ngIf="!dataSource.data.length">{{'No matching data found'}}</p>
        </section>
        <hr>
    </div>
    <div class="paginator">
        <mat-paginator (page)="handlePageEvent($event)" [length]="totalItems" [pageSize]="pageSize" [disabled]="false"
            [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
            [hidePageSize]="true" [pageIndex]="currentPageIndex" aria-label="Select page">
        </mat-paginator>
    </div>

</div>

