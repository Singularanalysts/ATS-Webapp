<div class="project-container">
    <div class="header-container mat-elevation-z1">
        <span class="header-text">
            Projects
        </span>

        <div class="project-actions">
            <button class="add-project" mat-raised-button color="primary" (click)="addProject()">
                Add Project
            </button>

            <div class="search-project">
                <input matInput type="text" class="search" placeholder="search projects" (keyup)="applyFilter($event)">
            </div>
        </div>
    </div>
    <div id="table-container" class="table-wrapper">
        <section class="mat-elevation-z8 project-table-style">
            <table mat-table [dataSource]="dataSource" matSort (matSortChange)="onSort($event)" oncopy="return false">
                <ng-container matColumnDef="SerialNum">
                    <th mat-header-cell *matHeaderCellDef  sortActionDescription="Sort by SerialNum" class="nowrap"> S No
                    </th>
                    <td mat-cell *matCellDef="let element"> {{ element.serialNum }} </td>
                </ng-container>

                <ng-container matColumnDef="projectId">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by projectId" class="nowrap">
                        Project ID </th>
                    <td mat-cell *matCellDef="let element" (click)="openTasks(element.projectid, element.pid)">
                        <a style="cursor: pointer; color:#0000ee; font-weight: 600;">
                            {{ element.projectid }}
                        </a>
                    </td>
                </ng-container>

                <ng-container matColumnDef="projectName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by projectName" class="nowrap"> Project Name </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.projectname | titlecase }} 
                    </td>
                </ng-container>

                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef  sortActionDescription="Sort by description" class="nowrap"> Description </th>
                    <td mat-cell *matCellDef="let element">
                        <div class="description-text truncate-multiline" matTooltip="{{ element.projectdescription }}" matTooltipPosition="above" matTooltipClass="custom-tooltip">
                            {{ element.projectdescription }}
                        </div>
                    </td>
                </ng-container>                

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef  mat-sort-header sortActionDescription="Sort by status" class="nowrap"> Status </th>
                    <td mat-cell *matCellDef="let element"> {{ element.status }} </td>
                </ng-container>

                <ng-container matColumnDef="Action">
                    <th mat-header-cell *matHeaderCellDef>Actions</th>
                    <td mat-cell *matCellDef="let element">
                        <span class="action-buttons">
                            <button mat-icon-button (click)="editProject(element)" class="action-button-ed">
                                <mat-icon class="edit-icon">edit</mat-icon>
                            </button>
                            <button mat-icon-button (click)="deleteProject(element)" class="action-button-ed">
                                <mat-icon class="delete-icon">delete</mat-icon>
                            </button>
                        </span>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="dataTableColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: dataTableColumns;"></tr>
            </table>
            <p class="no-data-found" *ngIf="!dataSource.data.length">{{'No matching data found'}}</p>
        </section>
        <hr>
    </div>
    <div class="paginator">
        <mat-paginator (page)="handlePageEvent($event)" [length]="totalItems" [pageSize]="pageSize" [disabled]="false"
            [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
            [hidePageSize]="true" [pageIndex]="currentPageIndex" aria-label="Select page">
        </mat-paginator>
    </div>

</div>