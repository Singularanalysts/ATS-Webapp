<!-- <h2 mat-dialog-title class="dialog-header">
  Alert Working
  <div class="close-section">
    <span *ngIf="remainingTime > 0" class="timer-text">{{ remainingTime }}s</span>
    <button mat-icon-button [disabled]="disableClose" (click)="onClose()" aria-label="Close dialog">
      <mat-icon>cancel</mat-icon>
    </button>
  </div>
</h2>

<mat-dialog-content class="dialog-content">
  {{ data }}
</mat-dialog-content> -->


<!-- <h2 mat-dialog-title class="dialog-header">
  Alert 
  <div class="close-section">
    <span *ngIf="remainingTime > 0" class="timer-text">Please wait {{ remainingTime }}s to close</span>
    <button mat-icon-button [disabled]="disableClose" (click)="onClose()" aria-label="Close dialog">
      <mat-icon>cancel</mat-icon>
    </button>
  </div>
</h2> -->
<!-- <h2 mat-dialog-title class="dialog-header">
  <div class="title-section">
    <mat-icon class="alert-icon">warning</mat-icon>
    <span class="title-text">Alert - New Requirements</span>
    <span class="record-count">({{ dataSource?.data?.length || 0 }} Records)</span>
  </div>

  <div class="close-section">
    <span *ngIf="remainingTime > 0" class="timer-text">
      Please wait {{ remainingTime }}s to close
    </span>
    <button mat-icon-button [disabled]="disableClose" (click)="onClose()" aria-label="Close dialog">
      <mat-icon>cancel</mat-icon>
    </button>
  </div>
</h2> -->
<h2 mat-dialog-title class="dialog-header">
  <div class="title-section">
    <mat-icon class="alert-icon">warning</mat-icon>
    <span class="title-text">Alert - New Requirements</span>
    <span class="record-count">({{ dataSource?.data?.length || 0 }})</span>
  </div>

  <div class="close-section">
    <span class="timer-text" [class.show]="remainingTime > 0">
      Please wait {{ remainingTime }}s to close
    </span>
    <button mat-icon-button  [disabled]="disableClose" (click)="onClose()" aria-label="Close dialog">
      <mat-icon>cancel</mat-icon>
    </button>
  </div>
</h2>

<mat-dialog-content class="dialog-content">

      <div id="table-container" class="table-scroll-container" >
            <section class="mat-elevation-z8 hot-list-table-style">
                <table mat-table [dataSource]="dataSource" oncopy="return false">

                    <!-- SNo Column mat-sort-header sortActionDescription="Sort by Serial Number"-->
                    <ng-container matColumnDef="SerialNum">
                        <th mat-header-cell *matHeaderCellDef >
                            S.No </th>
                        <td mat-cell *matCellDef="let element" > {{element?.serialNum}}</td>
                    </ng-container>
    
                    <!-- Name Column mat-sort-header sortActionDescription="Sort by Name"-->
                    <ng-container matColumnDef="posted_on">
                        <th mat-header-cell *matHeaderCellDef>Posted On</th>
                        <td mat-cell *matCellDef="let element" nowrap > 
                            {{ isValidDate(element?.posted_on) ? (element?.posted_on | date:'MM-dd-yyyy HH:mm') : 'N/A' }} 
                        </td>
                    </ng-container>
    
                    <!-- Technology Column mat-sort-header sortActionDescription="Sort by Technology"-->
                    <ng-container matColumnDef="job_title">
                        <th mat-header-cell *matHeaderCellDef
                            >
                            Title </th>
                        <td mat-cell *matCellDef="let element" ><span class="consultant-name"><a  href="{{element?.job_source}}" target="_blank"
                           (click)="empTag(element.id)" matTooltip="{{element?.job_title}}" 
                           matTooltipPosition="above">{{element?.job_title | titlecase}}</a>
                            </span> </td>
                    </ng-container>
    
                    <!-- Visa Column mat-sort-header sortActionDescription="Sort by Visa" -->
                    <!-- <ng-container matColumnDef="category_skill">
                        <th mat-header-cell *matHeaderCellDef style="width: 13%">
                            Category </th>
                        <td mat-cell *matCellDef="let element"style="width: 13%">
                            {{ element?.category_skill | titlecase }} </td>
                    </ng-container> -->
    
                    <!-- Experience Column  sortActionDescription="Sort by Experience"-->
                    <ng-container matColumnDef="employment_type">
                        <th mat-header-cell *matHeaderCellDef > Employee Type </th>
                        <td mat-cell *matCellDef="let element" >{{element?.employment_type | titlecase}} </td>
                    </ng-container>

                    <!-- Experience Column sortActionDescription="Sort by Experience"-->
                    <ng-container matColumnDef="job_location">
                        <th mat-header-cell *matHeaderCellDef> Location </th>
                        <td mat-cell *matCellDef="let element">{{element?.job_location | titlecase}} </td>
                    </ng-container>
    
                    <!-- Rate Column mat-sort-header sortActionDescription="Sort by Rate"-->
                    <ng-container matColumnDef="vendor">
                        <th mat-header-cell *matHeaderCellDef >
                            Vendor</th>
                            <td mat-cell *matCellDef="let element" class="req-info" (click)="goToReqInfo(element)"> {{element?.vendor | titlecase}}
                            </td>
                    </ng-container>
    
                    <!-- Body Column sortActionDescription="Sort by JobDescription"-->
                    <ng-container matColumnDef="JobDescription">
                        <th mat-header-cell *matHeaderCellDef > Job Description </th>
                        <td mat-cell *matCellDef="let element" class="jd-info" (click)="goToJobDescription(element)" >VIEW </td>
                    </ng-container>

                    
                    <!-- comments -->
                    <ng-container matColumnDef="Comments">
                        <th mat-header-cell *matHeaderCellDef > Comments </th>
                        <td mat-cell *matCellDef="let element" >
                            <span class="action-buttons" >
                                <button mat-icon-button class="action-button-ed" (click)="jobComments(element)">
                                    <mat-icon >comment</mat-icon>
                                </button>
                                <span class="bold-text">({{ element?.commentsCount || '0' }})</span>
                            </span>
                        </td>
                    </ng-container>

                    <!-- <ng-container matColumnDef="Matching">
                        <th mat-header-cell *matHeaderCellDef style="width: 3%"> Matching </th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-raised-button color="primary" style="width: max-content; height: fit-content; padding: 4px !important;" (click)="matching(element)">
                                check
                            </button>
                        </td>
                    </ng-container> -->
                      
                    <!-- Source Column mat-sort-header sortActionDescription="Sort by Source"-->
                    <ng-container matColumnDef="source">
                        <th mat-header-cell *matHeaderCellDef
                           >Source</th>
                        <td mat-cell *matCellDef="let element" nowrap > {{ element?.source | titlecase}} </td>
                    </ng-container>
                    <ng-container matColumnDef="ResumeUpload">
                        <th mat-header-cell *matHeaderCellDef >Resume Upload</th>
                        <td mat-cell *matCellDef="let element" nowrap >
                          <button mat-icon-button (click)="triggerFileUpload(fileInputRef)">
                            <mat-icon>upload</mat-icon>
                          </button>
                      
                          <!-- Hidden File Input (One per row) -->
                          <input type="file"
                                 #fileInputRef
                                 accept=".pdf,.doc,.docx"
                                 style="display: none"
                                 (change)="onFileSelectedata($event, element)" />
                        </td>
                      </ng-container>
                      
                      
                      <ng-container matColumnDef="Percentage">
                        <th mat-header-cell *matHeaderCellDef >Percentage</th>
                        <td mat-cell *matCellDef="let element" nowrap style="text-align: center">
                          {{ element?.percentage || 'N/A' }}
                        </td>
                      </ng-container>
                      
    
                    <!-- table ROW -->
                    <tr mat-header-row *matHeaderRowDef="dataTableColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: dataTableColumns;" [ngStyle]="getRowStyles(row)"></tr>
                </table>
                <p class="no-data-found" *ngIf="!dataSource.data.length">{{'No matching data found'}}</p>
            </section>
            <hr>
    </div>
    
</mat-dialog-content>




